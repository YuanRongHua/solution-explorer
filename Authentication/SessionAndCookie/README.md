
# Cookie + Session 登录
HTTP 是一种无状态的协议，客户端每次发送请求时，首先要和服务器端建立一个连接，在请求完成后又会断开这个连接。这种方式可以节省传输时占用的连接资源，但同时也存在一个问题：每次请求都是独立的，服务器端无法判断本次请求和上一次请求是否来自同一个用户，进而也就无法判断用户的登录状态。
为了解决 HTTP 无状态的问题，Lou Montulli 在 1994 年的时候，推出了 Cookie。
Cookie 是服务器端发送给客户端的一段特殊信息，这些信息以文本的方式存放在客户端，客户端每次向服务器端发送请求时都会带上这些特殊信息。
有了 Cookie 之后，服务器端就能够获取到客户端传递过来的信息了，如果需要对信息进行验证，还需要通过 Session。
客户端请求服务端，服务端会为这次请求开辟一块内存空间，这个便是 Session 对象。
有了 Cookie 和 Session 之后，我们就可以进行登录认证了。

## 实现流程：
Cookie + Session 的登录方式是最经典的一种登录方式，现在仍然有大量的企业在使用。

用户首次登录时：  
1.用户访问A网站的页面a，输入密码。  
2.服务器验证账号密码。  
3.验证成功，创建并保存SessionID。  
4.服务器响应客户端的HTTP请求，并通过Set-Cookie头信息把SessionId写入Cookie。 
*服务器端的 SessionId 可能存放在很多地方，例如：内存、文件、数据库等。  

第一次登录完成之后，后续的访问就可以直接使用 Cookie 进行身份验证了：  
1.用户访问A网站的页面b，会带上Cookie信息。  
2.服务器验证Cookie中的SessionId和服务器上的是否一致。   
3.一致就允许访问，不一致就踢回登录。  

## 存在的问题：
由于服务器端需要对接大量的客户端，也就需要存放大量的 SessionId，这样会导致服务器压力过大。
如果服务器端是一个集群，为了同步登录态，需要将 SessionId 同步到每一台机器上，无形中增加了服务器端维护成本。
由于 SessionId 存放在 Cookie 中，所以无法避免 CSRF 攻击。
